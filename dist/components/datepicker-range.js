var se=new WeakMap,{addEventListener:Dt,removeEventListener:kt}=EventTarget.prototype;function R(i,e){let t=se.get(i);t||(t=[],se.set(i,t)),e.forEach(r=>{Dt.call(...r),t.push(r)})}function ae(i){let e=se.get(i);e&&(e.forEach(t=>{kt.call(...t)}),se.delete(i))}if(!Event.prototype.composedPath){let i=(e,t=[])=>{t.push(e);let r;return e.parentNode?r=e.parentNode:e.host?r=e.host:e.defaultView&&(r=e.defaultView),r?i(r,t):t};Event.prototype.composedPath=function(){return i(this.target)}}function Ne(i,e,t){let[r,...n]=i;if(e(r))return r;if(!(r===t||r.tagName==="HTML"||n.length===0))return Ne(n,e,t)}function oe(i,e){let t=typeof e=="function"?e:r=>r instanceof Element&&r.matches(e);return Ne(i.composedPath(),t,i.currentTarget)}function de(i){return new Date(i).setHours(0,0,0,0)}function M(){return new Date().setHours(0,0,0,0)}function C(...i){switch(i.length){case 0:return M();case 1:return de(i[0])}let e=new Date(0);return e.setFullYear(...i),e.setHours(0,0,0,0)}function I(i,e){let t=new Date(i);return t.setDate(t.getDate()+e)}function Fe(i,e){return I(i,e*7)}function K(i,e){let t=new Date(i),r=t.getMonth()+e,n=r%12;n<0&&(n+=12);let s=t.setMonth(r);return t.getMonth()!==n?t.setDate(0):s}function L(i,e){let t=new Date(i),r=t.getMonth(),n=t.setFullYear(t.getFullYear()+e);return r===1&&t.getMonth()===2?t.setDate(0):n}function Ee(i,e){return(i-e+7)%7}function B(i,e,t=0){let r=new Date(i).getDay();return I(i,Ee(e,t)-Ee(r,t))}function Te(i,e){return Math.round((i-e)/6048e5)+1}function Ve(i){let e=B(i,4,1),t=B(new Date(e).setMonth(0,4),4,1);return Te(e,t)}function Be(i,e){let t=B(new Date(i).setMonth(0,1),e,e),r=B(i,e,e),n=Te(r,t);if(n<53)return n;let s=B(new Date(i).setDate(32),e,e);return r===s?1:n}function Le(i){return Be(i,0)}function Ae(i){return Be(i,6)}function P(i,e){let t=new Date(i).getFullYear();return Math.floor(t/e)*e}function x(i,e,t){if(e!==1&&e!==2)return i;let r=new Date(i);return e===1?t?r.setMonth(r.getMonth()+1,0):r.setDate(1):t?r.setFullYear(r.getFullYear()+1,0,0):r.setMonth(0,1),r.setHours(0,0,0,0)}function j(i){return i[i.length-1]}function F(i,...e){return e.forEach(t=>{i.includes(t)||i.push(t)}),i}function De(i,e){return i?i.split(e):[]}function $(i,e,t){let r=e===void 0||i>=e,n=t===void 0||i<=t;return r&&n}function ce(i,e,t){return i<e?e:i>t?t:i}function N(i,e,t={},r=0,n=""){let s=Object.keys(t).reduce((o,c)=>{let d=t[c];return typeof d=="function"&&(d=d(r)),`${o} ${c}="${d}"`},i);n+=`<${s}></${i}>`;let a=r+1;return a<e?N(i,e,t,a,n):n}function z(i){return i.replace(/>\s+/g,">").replace(/\s+</,"<")}var ue=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,bt=/[\s!-/:-@[-`{-~年月日]+/,ke={},We={y(i,e){return new Date(i).setFullYear(parseInt(e,10))},m(i,e,t){let r=new Date(i),n=parseInt(e,10)-1;if(isNaN(n)){if(!e)return NaN;let s=e.toLowerCase(),a=o=>o.toLowerCase().startsWith(s);if(n=t.monthsShort.findIndex(a),n<0&&(n=t.months.findIndex(a)),n<0)return NaN}return r.setMonth(n),r.getMonth()!==Ye(n)?r.setDate(0):r.getTime()},d(i,e){return new Date(i).setDate(parseInt(e,10))}},vt={d(i){return i.getDate()},dd(i){return le(i.getDate(),2)},D(i,e){return e.daysShort[i.getDay()]},DD(i,e){return e.days[i.getDay()]},m(i){return i.getMonth()+1},mm(i){return le(i.getMonth()+1,2)},M(i,e){return e.monthsShort[i.getMonth()]},MM(i,e){return e.months[i.getMonth()]},y(i){return i.getFullYear()},yy(i){return le(i.getFullYear(),2).slice(-2)},yyyy(i){return le(i.getFullYear(),4)}};function Ye(i){return i>-1?i%12:Ye(i+12)}function le(i,e){return i.toString().padStart(e,"0")}function Re(i){if(typeof i!="string")throw new Error("Invalid date format.");if(i in ke)return ke[i];let e=i.split(ue),t=i.match(new RegExp(ue,"g"));if(e.length===0||!t)throw new Error("Invalid date format.");let r=t.map(s=>vt[s]),n=Object.keys(We).reduce((s,a)=>(t.find(c=>c[0]!=="D"&&c[0].toLowerCase()===a)&&s.push(a),s),[]);return ke[i]={parser(s,a){let o=s.split(bt).reduce((c,d,u)=>{if(d.length>0&&t[u]){let h=t[u][0];h==="M"?c.m=d:h!=="D"&&(c[h]=d)}return c},{});return n.reduce((c,d)=>{let u=We[d](c,o[d],a);return isNaN(u)?c:u},M())},formatter(s,a){let o=r.reduce((c,d,u)=>c+=`${e[u]}${d(s,a)}`,"");return o+=j(e)}}}function T(i,e,t){if(i instanceof Date||typeof i=="number"){let r=de(i);return isNaN(r)?void 0:r}if(i){if(i==="today")return M();if(e&&e.toValue){let r=e.toValue(i,e,t);return isNaN(r)?void 0:de(r)}return Re(e).parser(i,t)}}function A(i,e,t){if(isNaN(i)||!i&&i!==0)return"";let r=typeof i=="number"?new Date(i):i;return e.toDisplay?e.toDisplay(r,e,t):Re(e).formatter(r,t)}var xt=document.createRange();function D(i){return xt.createContextualFragment(i)}function be(i){return i.parentElement||(i.parentNode instanceof ShadowRoot?i.parentNode.host:void 0)}function W(i){return i.getRootNode().activeElement===i}function H(i){i.style.display!=="none"&&(i.style.display&&(i.dataset.styleDisplay=i.style.display),i.style.display="none")}function _(i){i.style.display==="none"&&(i.dataset.styleDisplay?(i.style.display=i.dataset.styleDisplay,delete i.dataset.styleDisplay):i.style.display="")}function X(i){i.firstChild&&(i.removeChild(i.firstChild),X(i))}function Ie(i,e){X(i),e instanceof DocumentFragment?i.appendChild(e):typeof e=="string"?i.appendChild(D(e)):typeof e.forEach=="function"&&e.forEach(t=>{i.appendChild(t)})}var U={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}};var G={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,clearButton:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,enableOnReadonly:!0,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:"\xBB",orientation:"auto",pickLevel:0,prevArrow:"\xAB",showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayButton:!1,todayButtonMode:0,todayHighlight:!1,updateOnBlur:!0,weekNumbers:0,weekStart:0};var{language:ve,format:Ot,weekStart:Mt}=G;function Ke(i,e){return i.length<6&&e>=0&&e<7?F(i,e):i}function _e(i,e){switch(i===4?e===6?3:!e+1:i){case 1:return Ve;case 2:return Le;case 3:return Ae}}function Pe(i,e,t){return e.weekStart=i,e.weekEnd=(i+6)%7,t===4&&(e.getWeekNumber=_e(4,i)),i}function He(i,e,t,r){let n=T(i,e,t);return n!==void 0?n:r}function xe(i,e,t=3){let r=parseInt(i,10);return r>=0&&r<=t?r:e}function fe(i,e,t,r=void 0){e in i&&(t in i||(i[t]=r?r(i[e]):i[e]),delete i[e])}function Z(i,e){let t=Object.assign({},i),r={},n=e.constructor.locales,s=!!e.rangeSideIndex,{datesDisabled:a,format:o,language:c,locale:d,maxDate:u,maxView:h,minDate:S,pickLevel:p,startView:g,weekNumbers:f,weekStart:y}=e.config||{};if(fe(t,"calendarWeeks","weekNumbers",l=>l?1:0),fe(t,"clearBtn","clearButton"),fe(t,"todayBtn","todayButton"),fe(t,"todayBtnMode","todayButtonMode"),t.language){let l;if(t.language!==c&&(n[t.language]?l=t.language:(l=t.language.split("-")[0],n[l]||(l=!1))),delete t.language,l){c=r.language=l;let m=d||n[ve];d=Object.assign({format:Ot,weekStart:Mt},n[ve]),c!==ve&&Object.assign(d,n[c]),r.locale=d,o===m.format&&(o=r.format=d.format),y===m.weekStart&&(y=Pe(d.weekStart,r,f))}}if(t.format){let l=typeof t.format.toDisplay=="function",m=typeof t.format.toValue=="function",w=ue.test(t.format);(l&&m||w)&&(o=r.format=t.format),delete t.format}let v=p;"pickLevel"in t&&(v=xe(t.pickLevel,p,2),delete t.pickLevel),v!==p&&(v>p&&("minDate"in t||(t.minDate=S),"maxDate"in t||(t.maxDate=u)),a&&!t.datesDisabled&&(t.datesDisabled=[]),p=r.pickLevel=v);let O=S,k=u;if("minDate"in t){let l=C(0,0,1);O=t.minDate===null?l:He(t.minDate,o,d,O),O!==l&&(O=x(O,p,!1)),delete t.minDate}if("maxDate"in t&&(k=t.maxDate===null?void 0:He(t.maxDate,o,d,k),k!==void 0&&(k=x(k,p,!0)),delete t.maxDate),k<O?(S=r.minDate=k,u=r.maxDate=O):(S!==O&&(S=r.minDate=O),u!==k&&(u=r.maxDate=k)),t.datesDisabled){let l=t.datesDisabled;if(typeof l=="function")r.datesDisabled=null,r.checkDisabled=(m,w)=>l(new Date(m),w,s);else{let m=r.datesDisabled=l.reduce((w,ye)=>{let Ce=T(ye,o,d);return Ce!==void 0?F(w,x(Ce,p,s)):w},[]);r.checkDisabled=w=>m.includes(w)}delete t.datesDisabled}if("defaultViewDate"in t){let l=T(t.defaultViewDate,o,d);l!==void 0&&(r.defaultViewDate=l),delete t.defaultViewDate}if("weekStart"in t){let l=Number(t.weekStart)%7;isNaN(l)||(y=Pe(l,r,f)),delete t.weekStart}if(t.daysOfWeekDisabled&&(r.daysOfWeekDisabled=t.daysOfWeekDisabled.reduce(Ke,[]),delete t.daysOfWeekDisabled),t.daysOfWeekHighlighted&&(r.daysOfWeekHighlighted=t.daysOfWeekHighlighted.reduce(Ke,[]),delete t.daysOfWeekHighlighted),"weekNumbers"in t){let l=t.weekNumbers;if(l){let m=typeof l=="function"?(w,ye)=>l(new Date(w),ye):_e(l=parseInt(l,10),y);m&&(f=r.weekNumbers=l,r.getWeekNumber=m)}else f=r.weekNumbers=0,r.getWeekNumber=null;delete t.weekNumbers}if("maxNumberOfDates"in t){let l=parseInt(t.maxNumberOfDates,10);l>=0&&(r.maxNumberOfDates=l,r.multidate=l!==1),delete t.maxNumberOfDates}t.dateDelimiter&&(r.dateDelimiter=String(t.dateDelimiter),delete t.dateDelimiter);let E=h;"maxView"in t&&(E=xe(t.maxView,h),delete t.maxView),E=p>E?p:E,E!==h&&(h=r.maxView=E);let b=g;if("startView"in t&&(b=xe(t.startView,b),delete t.startView),b<p?b=p:b>h&&(b=h),b!==g&&(r.startView=b),t.prevArrow){let l=D(t.prevArrow);l.childNodes.length>0&&(r.prevArrow=l.childNodes),delete t.prevArrow}if(t.nextArrow){let l=D(t.nextArrow);l.childNodes.length>0&&(r.nextArrow=l.childNodes),delete t.nextArrow}if("disableTouchKeyboard"in t&&(r.disableTouchKeyboard="ontouchstart"in document&&!!t.disableTouchKeyboard,delete t.disableTouchKeyboard),t.orientation){let l=t.orientation.toLowerCase().split(/\s+/g);r.orientation={x:l.find(m=>m==="left"||m==="right")||"auto",y:l.find(m=>m==="top"||m==="bottom")||"auto"},delete t.orientation}if("todayButtonMode"in t){switch(t.todayButtonMode){case 0:case 1:r.todayButtonMode=t.todayButtonMode}delete t.todayButtonMode}return Object.entries(t).forEach(([l,m])=>{m!==void 0&&l in G&&(r[l]=m)}),r}var je={show:{key:"ArrowDown"},hide:null,toggle:{key:"Escape"},prevButton:{key:"ArrowLeft",ctrlOrMetaKey:!0},nextButton:{key:"ArrowRight",ctrlOrMetaKey:!0},viewSwitch:{key:"ArrowUp",ctrlOrMetaKey:!0},clearButton:{key:"Backspace",ctrlOrMetaKey:!0},todayButton:{key:".",ctrlOrMetaKey:!0},exitEditMode:{key:"ArrowDown",ctrlOrMetaKey:!0}};function Oe(i){return Object.keys(je).reduce((e,t)=>{let r=i[t]===void 0?je[t]:i[t],n=r&&r.key;if(!n||typeof n!="string")return e;let s={key:n,ctrlOrMetaKey:!!(r.ctrlOrMetaKey||r.ctrlKey||r.metaKey)};return n.length>1&&(s.altKey=!!r.altKey,s.shiftKey=!!r.shiftKey),e[t]=s,e},{})}var $e=i=>i.map(e=>`<button type="button" class="%buttonClass% ${e}" tabindex="-1"></button>`).join(""),ze=z(`<div class="datepicker">
  <div class="datepicker-picker">
    <div class="datepicker-header">
      <div class="datepicker-title"></div>
      <div class="datepicker-controls">
        ${$e(["prev-button prev-btn","view-switch","next-button next-btn"])}
      </div>
    </div>
    <div class="datepicker-main"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls">
        ${$e(["today-button today-btn","clear-button clear-btn"])}
      </div>
    </div>
  </div>
</div>`);var Ue=z(`<div class="days">
  <div class="days-of-week">${N("span",7,{class:"dow"})}</div>
  <div class="datepicker-grid">${N("span",42)}</div>
</div>`);var qe=z(`<div class="week-numbers calendar-weeks">
  <div class="days-of-week"><span class="dow"></span></div>
  <div class="weeks">${N("span",6,{class:"week"})}</div>
</div>`);var V=class{constructor(e,t){Object.assign(this,t,{picker:e,element:D('<div class="datepicker-view"></div>').firstChild,selected:[],isRangeEnd:!!e.datepicker.rangeSideIndex}),this.init(this.picker.datepicker.config)}init(e){"pickLevel"in e&&(this.isMinView=this.id===e.pickLevel),this.setOptions(e),this.updateFocus(),this.updateSelection()}prepareForRender(e,t,r){this.disabled=[];let n=this.picker;n.setViewSwitchLabel(e),n.setPrevButtonDisabled(t),n.setNextButtonDisabled(r)}setDisabled(e,t){t.add("disabled"),F(this.disabled,e)}performBeforeHook(e,t){let r=this.beforeShow(new Date(t));switch(typeof r){case"boolean":r={enabled:r};break;case"string":r={classes:r}}if(r){let n=e.classList;if(r.enabled===!1&&this.setDisabled(t,n),r.classes){let s=r.classes.split(/\s+/);n.add(...s),s.includes("disabled")&&this.setDisabled(t,n)}r.content&&Ie(e,r.content)}}renderCell(e,t,r,n,{selected:s,range:a},o,c=[]){e.textContent=t,this.isMinView&&(e.dataset.date=n);let d=e.classList;if(e.className=`datepicker-cell ${this.cellClass}`,r<this.first?d.add("prev"):r>this.last&&d.add("next"),d.add(...c),(o||this.checkDisabled(n,this.id))&&this.setDisabled(n,d),a){let[u,h]=a;r>u&&r<h&&d.add("range"),r===u&&d.add("range-start"),r===h&&d.add("range-end")}s.includes(r)&&d.add("selected"),r===this.focused&&d.add("focused"),this.beforeShow&&this.performBeforeHook(e,n)}refreshCell(e,t,r,[n,s]){let a=e.classList;a.remove("range","range-start","range-end","selected","focused"),t>n&&t<s&&a.add("range"),t===n&&a.add("range-start"),t===s&&a.add("range-end"),r.includes(t)&&a.add("selected"),t===this.focused&&a.add("focused")}changeFocusedCell(e){this.grid.querySelectorAll(".focused").forEach(t=>{t.classList.remove("focused")}),this.grid.children[e].classList.add("focused")}};var Q=class extends V{constructor(e){super(e,{id:0,name:"days",cellClass:"day"})}init(e,t=!0){if(t){let r=D(Ue).firstChild;this.dow=r.firstChild,this.grid=r.lastChild,this.element.appendChild(r)}super.init(e)}setOptions(e){let t;if("minDate"in e&&(this.minDate=e.minDate),"maxDate"in e&&(this.maxDate=e.maxDate),e.checkDisabled&&(this.checkDisabled=e.checkDisabled),e.daysOfWeekDisabled&&(this.daysOfWeekDisabled=e.daysOfWeekDisabled,t=!0),e.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=e.daysOfWeekHighlighted),"todayHighlight"in e&&(this.todayHighlight=e.todayHighlight),"weekStart"in e&&(this.weekStart=e.weekStart,this.weekEnd=e.weekEnd,t=!0),e.locale){let r=this.locale=e.locale;this.dayNames=r.daysMin,this.switchLabelFormat=r.titleFormat,t=!0}if("beforeShowDay"in e&&(this.beforeShow=typeof e.beforeShowDay=="function"?e.beforeShowDay:void 0),"weekNumbers"in e)if(e.weekNumbers&&!this.weekNumbers){let r=D(qe).firstChild;this.weekNumbers={element:r,dow:r.firstChild,weeks:r.lastChild},this.element.insertBefore(r,this.element.firstChild)}else this.weekNumbers&&!e.weekNumbers&&(this.element.removeChild(this.weekNumbers.element),this.weekNumbers=null);"getWeekNumber"in e&&(this.getWeekNumber=e.getWeekNumber),"showDaysOfWeek"in e&&(e.showDaysOfWeek?(_(this.dow),this.weekNumbers&&_(this.weekNumbers.dow)):(H(this.dow),this.weekNumbers&&H(this.weekNumbers.dow))),t&&Array.from(this.dow.children).forEach((r,n)=>{let s=(this.weekStart+n)%7;r.textContent=this.dayNames[s],r.className=this.daysOfWeekDisabled.includes(s)?"dow disabled":"dow"})}updateFocus(){let e=new Date(this.picker.viewDate),t=e.getFullYear(),r=e.getMonth(),n=C(t,r,1),s=B(n,this.weekStart,this.weekStart);this.first=n,this.last=C(t,r+1,0),this.start=s,this.focused=this.picker.viewDate}updateSelection(){let{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e,t&&(this.range=t.dates)}render(){if(this.today=this.todayHighlight?M():void 0,this.prepareForRender(A(this.focused,this.switchLabelFormat,this.locale),this.first<=this.minDate,this.last>=this.maxDate),this.weekNumbers){let e=this.weekStart,t=B(this.first,e,e);Array.from(this.weekNumbers.weeks.children).forEach((r,n)=>{let s=Fe(t,n);r.textContent=this.getWeekNumber(s,e),n>3&&r.classList[s>this.last?"add":"remove"]("next")})}Array.from(this.grid.children).forEach((e,t)=>{let r=I(this.start,t),n=new Date(r),s=n.getDay(),a=[];this.today===r&&a.push("today"),this.daysOfWeekHighlighted.includes(s)&&a.push("highlighted"),this.renderCell(e,n.getDate(),r,r,this,r<this.minDate||r>this.maxDate||this.daysOfWeekDisabled.includes(s),a)})}refresh(){let e=this.range||[];Array.from(this.grid.children).forEach(t=>{this.refreshCell(t,Number(t.dataset.date),this.selected,e)})}refreshFocus(){this.changeFocusedCell(Math.round((this.focused-this.start)/864e5))}};function Je(i,e){if(!i||!i[0]||!i[1])return;let[[t,r],[n,s]]=i;if(!(t>e||n<e))return[t===e?r:-1,n===e?s:12]}var ee=class extends V{constructor(e){super(e,{id:1,name:"months",cellClass:"month"})}init(e,t=!0){t&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid"),this.grid.appendChild(D(N("span",12,{"data-month":r=>r}))),this.first=0,this.last=11),super.init(e)}setOptions(e){if(e.locale&&(this.monthNames=e.locale.monthsShort),"minDate"in e)if(e.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{let t=new Date(e.minDate);this.minYear=t.getFullYear(),this.minMonth=t.getMonth(),this.minDate=t.setDate(1)}if("maxDate"in e)if(e.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{let t=new Date(e.maxDate);this.maxYear=t.getFullYear(),this.maxMonth=t.getMonth(),this.maxDate=C(this.maxYear,this.maxMonth+1,0)}e.checkDisabled&&(this.checkDisabled=this.isMinView||e.datesDisabled===null?e.checkDisabled:()=>!1),"beforeShowMonth"in e&&(this.beforeShow=typeof e.beforeShowMonth=="function"?e.beforeShowMonth:void 0)}updateFocus(){let e=new Date(this.picker.viewDate);this.year=e.getFullYear(),this.focused=e.getMonth()}updateSelection(){let{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((r,n)=>{let s=new Date(n),a=s.getFullYear(),o=s.getMonth();return r[a]===void 0?r[a]=[o]:F(r[a],o),r},{}),t&&t.dates&&(this.range=t.dates.map(r=>{let n=new Date(r);return isNaN(n)?void 0:[n.getFullYear(),n.getMonth()]}))}render(){this.prepareForRender(this.year,this.year<=this.minYear,this.year>=this.maxYear);let e=this.selected[this.year]||[],t=this.year<this.minYear||this.year>this.maxYear,r=this.year===this.minYear,n=this.year===this.maxYear,s=Je(this.range,this.year);Array.from(this.grid.children).forEach((a,o)=>{let c=x(new Date(this.year,o,1),1,this.isRangeEnd);this.renderCell(a,this.monthNames[o],o,c,{selected:e,range:s},t||r&&o<this.minMonth||n&&o>this.maxMonth)})}refresh(){let e=this.selected[this.year]||[],t=Je(this.range,this.year)||[];Array.from(this.grid.children).forEach((r,n)=>{this.refreshCell(r,n,e,t)})}refreshFocus(){this.changeFocusedCell(this.focused)}};function St(i){return[...i].reduce((e,t,r)=>e+=r?t:t.toUpperCase(),"")}var q=class extends V{constructor(e,t){super(e,t)}init(e,t=!0){t&&(this.navStep=this.step*10,this.beforeShowOption=`beforeShow${St(this.cellClass)}`,this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid"),this.grid.appendChild(D(N("span",12)))),super.init(e)}setOptions(e){if("minDate"in e&&(e.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=P(e.minDate,this.step),this.minDate=C(this.minYear,0,1))),"maxDate"in e&&(e.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=P(e.maxDate,this.step),this.maxDate=C(this.maxYear,11,31))),e.checkDisabled&&(this.checkDisabled=this.isMinView||e.datesDisabled===null?e.checkDisabled:()=>!1),this.beforeShowOption in e){let t=e[this.beforeShowOption];this.beforeShow=typeof t=="function"?t:void 0}}updateFocus(){let e=new Date(this.picker.viewDate),t=P(e,this.navStep),r=t+9*this.step;this.first=t,this.last=r,this.start=t-this.step,this.focused=P(e,this.step)}updateSelection(){let{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((r,n)=>F(r,P(n,this.step)),[]),t&&t.dates&&(this.range=t.dates.map(r=>{if(r!==void 0)return P(r,this.step)}))}render(){this.prepareForRender(`${this.first}-${this.last}`,this.first<=this.minYear,this.last>=this.maxYear),Array.from(this.grid.children).forEach((e,t)=>{let r=this.start+t*this.step,n=x(new Date(r,0,1),2,this.isRangeEnd);e.dataset.year=r,this.renderCell(e,r,r,n,this,r<this.minYear||r>this.maxYear)})}refresh(){let e=this.range||[];Array.from(this.grid.children).forEach(t=>{this.refreshCell(t,Number(t.textContent),this.selected,e)})}refreshFocus(){this.changeFocusedCell(Math.round((this.focused-this.start)/this.step))}};function Y(i,e){let t={bubbles:!0,cancelable:!0,detail:{date:i.getDate(),viewDate:new Date(i.picker.viewDate),viewId:i.picker.currentView.id,datepicker:i}};i.element.dispatchEvent(new CustomEvent(e,t))}function J(i,e){let{config:t,picker:r}=i,{currentView:n,viewDate:s}=r,a;switch(n.id){case 0:a=K(s,e);break;case 1:a=L(s,e);break;default:a=L(s,e*n.navStep)}a=ce(a,t.minDate,t.maxDate),r.changeFocus(a).render()}function he(i){let e=i.picker.currentView.id;e!==i.config.maxView&&i.picker.changeView(e+1).render()}function pe(i){i.setDate({clear:!0})}function me(i){let e=M();i.config.todayButtonMode===1?i.setDate(e,{forceRefresh:!0,viewDate:e}):i.setFocusedDate(e,!0)}function we(i){let e=()=>{i.config.updateOnBlur?i.update({revert:!0}):i.refresh("input"),i.hide()},t=i.element;W(t)?t.addEventListener("blur",e,{once:!0}):e()}function Xe(i,e){let t=i.picker,r=new Date(t.viewDate),n=t.currentView.id,s=n===1?K(r,e-r.getMonth()):L(r,e-r.getFullYear());t.changeFocus(s).changeView(n-1).render()}function Ge(i){he(i)}function Ze(i){J(i,-1)}function Qe(i){J(i,1)}function et(i,e){let t=oe(e,".datepicker-cell");if(!t||t.classList.contains("disabled"))return;let{id:r,isMinView:n}=i.picker.currentView,s=t.dataset;n?i.setDate(Number(s.date)):r===1?Xe(i,Number(s.month)):Xe(i,Number(s.year))}function tt(i){i.preventDefault()}var Me=["left","top","right","bottom"].reduce((i,e)=>(i[e]=`datepicker-orient-${e}`,i),{}),it=i=>i&&`${i}px`;function rt(i,e){if("title"in e&&(e.title?(i.controls.title.textContent=e.title,_(i.controls.title)):(i.controls.title.textContent="",H(i.controls.title))),e.prevArrow){let t=i.controls.prevButton;X(t),e.prevArrow.forEach(r=>{t.appendChild(r.cloneNode(!0))})}if(e.nextArrow){let t=i.controls.nextButton;X(t),e.nextArrow.forEach(r=>{t.appendChild(r.cloneNode(!0))})}if(e.locale&&(i.controls.todayButton.textContent=e.locale.today,i.controls.clearButton.textContent=e.locale.clear),"todayButton"in e&&(e.todayButton?_(i.controls.todayButton):H(i.controls.todayButton)),"minDate"in e||"maxDate"in e){let{minDate:t,maxDate:r}=i.datepicker.config;i.controls.todayButton.disabled=!$(M(),t,r)}"clearButton"in e&&(e.clearButton?_(i.controls.clearButton):H(i.controls.clearButton))}function nt(i){let{dates:e,config:t,rangeSideIndex:r}=i,n=e.length>0?j(e):x(t.defaultViewDate,t.pickLevel,r);return ce(n,t.minDate,t.maxDate)}function st(i,e){!("_oldViewDate"in i)&&e!==i.viewDate&&(i._oldViewDate=i.viewDate),i.viewDate=e;let{id:t,year:r,first:n,last:s}=i.currentView,a=new Date(e).getFullYear();switch(t){case 0:return e<n||e>s;case 1:return a!==r;default:return a<n||a>s}}function Se(i){return window.getComputedStyle(i).direction}function at(i){let e=be(i);if(!(e===document.body||!e))return window.getComputedStyle(e).overflow!=="visible"?e:at(e)}var te=class{constructor(e){let{config:t,inputField:r}=this.datepicker=e,n=ze.replace(/%buttonClass%/g,t.buttonClass),s=this.element=D(n).firstChild,[a,o,c]=s.firstChild.children,d=a.firstElementChild,[u,h,S]=a.lastElementChild.children,[p,g]=c.firstChild.children,f={title:d,prevButton:u,viewSwitch:h,nextButton:S,todayButton:p,clearButton:g};this.main=o,this.controls=f;let y=r?"dropdown":"inline";s.classList.add(`datepicker-${y}`),rt(this,t),this.viewDate=nt(e),R(e,[[s,"mousedown",tt],[o,"click",et.bind(null,e)],[f.viewSwitch,"click",Ge.bind(null,e)],[f.prevButton,"click",Ze.bind(null,e)],[f.nextButton,"click",Qe.bind(null,e)],[f.todayButton,"click",me.bind(null,e)],[f.clearButton,"click",pe.bind(null,e)]]),this.views=[new Q(this),new ee(this),new q(this,{id:2,name:"years",cellClass:"year",step:1}),new q(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.container?t.container.appendChild(this.element):r.after(this.element)}setOptions(e){rt(this,e),this.views.forEach(t=>{t.init(e,!1)}),this.currentView.render()}detach(){this.element.remove()}show(){if(this.active)return;let{datepicker:e,element:t}=this,r=e.inputField;if(r){let n=Se(r);n!==Se(be(t))?t.dir=n:t.dir&&t.removeAttribute("dir"),this.place(),t.classList.add("active"),e.config.disableTouchKeyboard&&r.blur()}else t.classList.add("active");this.active=!0,Y(e,"show")}hide(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active"),this.active=!1,Y(this.datepicker,"hide"))}place(){let{classList:e,style:t}=this.element;t.display="block";let{width:r,height:n}=this.element.getBoundingClientRect(),s=this.element.offsetParent;t.display="";let{config:a,inputField:o}=this.datepicker,{left:c,top:d,right:u,bottom:h,width:S,height:p}=o.getBoundingClientRect(),{x:g,y:f}=a.orientation,y=c,v=d;if(s===document.body||!s)y+=window.scrollX,v+=window.scrollY;else{let w=s.getBoundingClientRect();y-=w.left-s.scrollLeft,v-=w.top-s.scrollTop}let O=at(o),k=0,E=0,{clientWidth:b,clientHeight:l}=document.documentElement;if(O){let w=O.getBoundingClientRect();w.top>0&&(E=w.top),w.left>0&&(k=w.left),w.right<b&&(b=w.right),w.bottom<l&&(l=w.bottom)}let m=0;g==="auto"&&(c<k?(g="left",m=k-c):c+r>b?(g="right",b<u&&(m=b-u)):Se(o)==="rtl"?g=u-r<k?"left":"right":g="left"),g==="right"&&(y+=S-r),y+=m,f==="auto"&&(d-n>E?f=h+n>l?"top":"bottom":f="bottom"),f==="top"?v-=n:v+=p,e.remove(...Object.values(Me)),e.add(Me[g],Me[f]),t.left=it(y),t.top=it(v)}setViewSwitchLabel(e){this.controls.viewSwitch.textContent=e}setPrevButtonDisabled(e){this.controls.prevButton.disabled=e}setNextButtonDisabled(e){this.controls.nextButton.disabled=e}changeView(e){let t=this.currentView;return e!==t.id&&(this._oldView||(this._oldView=t),this.currentView=this.views[e],this._renderMethod="render"),this}changeFocus(e){return this._renderMethod=st(this,e)?"render":"refreshFocus",this.views.forEach(t=>{t.updateFocus()}),this}update(e=void 0){let t=e===void 0?nt(this.datepicker):e;return this._renderMethod=st(this,t)?"render":"refresh",this.views.forEach(r=>{r.updateFocus(),r.updateSelection()}),this}render(e=!0){let{currentView:t,datepicker:r,_oldView:n}=this,s=new Date(this._oldViewDate),a=e&&this._renderMethod||"render";if(delete this._oldView,delete this._oldViewDate,delete this._renderMethod,t[a](),n&&(this.main.replaceChild(t.element,n.element),Y(r,"changeView")),!isNaN(s)){let o=new Date(this.viewDate);o.getFullYear()!==s.getFullYear()&&Y(r,"changeYear"),o.getMonth()!==s.getMonth()&&Y(r,"changeMonth")}}};function ot(i,e,t,r,n,s){if($(i,n,s)){if(r(i)){let a=e(i,t);return ot(a,e,t,r,n,s)}return i}}function Ct(i,e,t){let r=i.picker,n=r.currentView,s=n.step||1,a=r.viewDate,o;switch(n.id){case 0:a=I(a,t?e*7:e),o=I;break;case 1:a=K(a,t?e*4:e),o=K;break;default:a=L(a,e*(t?4:1)*s),o=L}a=ot(a,o,e<0?-s:s,c=>n.disabled.includes(c),n.minDate,n.maxDate),a!==void 0&&r.changeFocus(a).render()}function dt(i,e){let{config:t,picker:r,editMode:n}=i,s=r.active,{key:a,altKey:o,shiftKey:c}=e,d=e.ctrlKey||e.metaKey,u=()=>{e.preventDefault(),e.stopPropagation()};if(a==="Tab"){we(i);return}if(a==="Enter"){if(!s)i.update();else if(n)i.exitEditMode({update:!0,autohide:t.autohide});else{let f=r.currentView;f.isMinView?i.setDate(r.viewDate):(r.changeView(f.id-1).render(),u())}return}let h=t.shortcutKeys,S={key:a,ctrlOrMetaKey:d,altKey:o,shiftKey:c},p=Object.keys(h).find(f=>{let y=h[f];return!Object.keys(y).find(v=>y[v]!==S[v])});if(p){let f;if(p==="toggle"?f=p:n?p==="exitEditMode"&&(f=p):s?p==="hide"?f=p:p==="prevButton"?f=[J,[i,-1]]:p==="nextButton"?f=[J,[i,1]]:p==="viewSwitch"?f=[he,[i]]:t.clearButton&&p==="clearButton"?f=[pe,[i]]:t.todayButton&&p==="todayButton"&&(f=[me,[i]]):p==="show"&&(f=p),f){Array.isArray(f)?f[0].apply(null,f[1]):i[f](),u();return}}if(!s||n)return;let g=(f,y)=>{c||d||o?i.enterEditMode():(Ct(i,f,y),e.preventDefault())};a==="ArrowLeft"?g(-1,!1):a==="ArrowRight"?g(1,!1):a==="ArrowUp"?g(-1,!0):a==="ArrowDown"?g(1,!0):(a==="Backspace"||a==="Delete"||a&&a.length===1&&!d)&&i.enterEditMode()}function ct(i){i.config.showOnFocus&&!i._showing&&i.show()}function lt(i,e){let t=e.target;(i.picker.active||i.config.showOnClick)&&(t._active=W(t),t._clicking=setTimeout(()=>{delete t._active,delete t._clicking},2e3))}function ut(i,e){let t=e.target;t._clicking&&(clearTimeout(t._clicking),delete t._clicking,t._active&&i.enterEditMode(),delete t._active,i.config.showOnClick&&i.show())}function ft(i,e){e.clipboardData.types.includes("text/plain")&&i.enterEditMode()}function ht(i,e){let{element:t,picker:r}=i;if(!r.active&&!W(t))return;let n=r.element;oe(e,s=>s===t||s===n)||we(i)}function wt(i,e){return i.map(t=>A(t,e.format,e.locale)).join(e.dateDelimiter)}function gt(i,e,t=!1){if(e.length===0)return t?[]:void 0;let{config:r,dates:n,rangeSideIndex:s}=i,{pickLevel:a,maxNumberOfDates:o}=r,c=e.reduce((d,u)=>{let h=T(u,r.format,r.locale);return h===void 0||(h=x(h,a,s),$(h,r.minDate,r.maxDate)&&!d.includes(h)&&!r.checkDisabled(h,a)&&(a>0||!r.daysOfWeekDisabled.includes(new Date(h).getDay()))&&d.push(h)),d},[]);if(c.length!==0)return r.multidate&&!t&&(c=c.reduce((d,u)=>(n.includes(u)||d.push(u),d),n.filter(d=>!c.includes(d)))),o&&c.length>o?c.slice(o*-1):c}function ge(i,e=3,t=!0,r=void 0){let{config:n,picker:s,inputField:a}=i;if(e&2){let o=s.active?n.pickLevel:n.startView;s.update(r).changeView(o).render(t)}e&1&&a&&(a.value=wt(i.dates,n))}function pt(i,e,t){let r=i.config,{clear:n,render:s,autohide:a,revert:o,forceRefresh:c,viewDate:d}=t;s===void 0&&(s=!0),s?a===void 0&&(a=r.autohide):a=c=!1,d=T(d,r.format,r.locale);let u=gt(i,e,n);!u&&!o||(u&&u.toString()!==i.dates.toString()?(i.dates=u,ge(i,s?3:1,!0,d),Y(i,"changeDate")):ge(i,c?3:1,!0,d),a&&i.hide())}function mt(i,e){return e?t=>A(t,e,i.config.locale):t=>new Date(t)}var ie=class{constructor(e,t={},r=void 0){e.datepicker=this,this.element=e,this.dates=[];let n=this.config=Object.assign({buttonClass:t.buttonClass&&String(t.buttonClass)||"button",container:null,defaultViewDate:M(),maxDate:void 0,minDate:void 0},Z(G,this)),s;if(e.tagName==="INPUT"?(s=this.inputField=e,s.classList.add("datepicker-input"),t.container&&(n.container=t.container instanceof HTMLElement?t.container:document.querySelector(t.container))):n.container=e,r){let u=r.inputs.indexOf(s),h=r.datepickers;if(u<0||u>1||!Array.isArray(h))throw Error("Invalid rangepicker object.");h[u]=this,this.rangepicker=r,this.rangeSideIndex=u}this._options=t,Object.assign(n,Z(t,this)),n.shortcutKeys=Oe(t.shortcutKeys||{});let a=De(e.value||e.dataset.date,n.dateDelimiter);delete e.dataset.date;let o=gt(this,a);o&&o.length>0&&(this.dates=o),s&&(s.value=wt(this.dates,n));let c=this.picker=new te(this),d=[e,"keydown",dt.bind(null,this)];s?R(this,[d,[s,"focus",ct.bind(null,this)],[s,"mousedown",lt.bind(null,this)],[s,"click",ut.bind(null,this)],[s,"paste",ft.bind(null,this)],[document,"mousedown",ht.bind(null,this)],[window,"resize",c.place.bind(c)]]):(R(this,[d]),this.show())}static formatDate(e,t,r){return A(e,t,r&&U[r]||U.en)}static parseDate(e,t,r){return T(e,t,r&&U[r]||U.en)}static get locales(){return U}get active(){return!!(this.picker&&this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(e){let t=Z(e,this);Object.assign(this._options,e),Object.assign(this.config,t),this.picker.setOptions(t),ge(this,3)}show(){if(this.inputField){let{config:e,inputField:t}=this;if(t.disabled||t.readOnly&&!e.enableOnReadonly)return;!W(t)&&!e.disableTouchKeyboard&&(this._showing=!0,t.focus(),delete this._showing)}this.picker.show()}hide(){this.inputField&&(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}toggle(){this.picker.active?this.inputField&&this.picker.hide():this.show()}destroy(){this.hide(),ae(this),this.picker.detach();let e=this.element;return e.classList.remove("datepicker-input"),delete e.datepicker,this}getDate(e=void 0){let t=mt(this,e);if(this.config.multidate)return this.dates.map(t);if(this.dates.length>0)return t(this.dates[0])}setDate(...e){let t=[...e],r={},n=j(e);n&&typeof n=="object"&&!Array.isArray(n)&&!(n instanceof Date)&&Object.assign(r,t.pop());let s=Array.isArray(t[0])?t[0]:t;pt(this,s,r)}update(e=void 0){if(!this.inputField)return;let t=Object.assign(e||{},{clear:!0,render:!0,viewDate:void 0}),r=De(this.inputField.value,this.config.dateDelimiter);pt(this,r,t)}getFocusedDate(e=void 0){return mt(this,e)(this.picker.viewDate)}setFocusedDate(e,t=!1){let{config:r,picker:n,active:s,rangeSideIndex:a}=this,o=r.pickLevel,c=T(e,r.format,r.locale);c!==void 0&&(n.changeFocus(x(c,o,a)),s&&t&&n.changeView(o),n.render())}refresh(e=void 0,t=!1){e&&typeof e!="string"&&(t=e,e=void 0);let r;e==="picker"?r=2:e==="input"?r=1:r=3,ge(this,r,!t)}enterEditMode(){let e=this.inputField;!e||e.readOnly||!this.picker.active||this.editMode||(this.editMode=!0,e.classList.add("in-edit"))}exitEditMode(e=void 0){if(!this.inputField||!this.editMode)return;let t=Object.assign({update:!1},e);delete this.editMode,this.inputField.classList.remove("in-edit"),t.update&&this.update(t)}};function yt(i){let e=Object.assign({},i);return delete e.inputs,delete e.allowOneSidedRange,delete e.maxNumberOfDates,e}function Nt(i,e,t,r){R(i,[[t,"changeDate",e]]),new ie(t,r,i)}function re(i,e){if(i._updating)return;i._updating=!0;let t=e.target;if(t.datepicker===void 0)return;let r=i.datepickers,[n,s]=r,a={render:!1},o=i.inputs.indexOf(t),c=o===0?1:0,d=r[o].dates[0],u=r[c].dates[0];d!==void 0&&u!==void 0?o===0&&d>u?(n.setDate(u,a),s.setDate(d,a)):o===1&&d<u&&(n.setDate(d,a),s.setDate(u,a)):i.allowOneSidedRange||(d!==void 0||u!==void 0)&&(a.clear=!0,r[c].setDate(r[o].dates,a)),r.forEach(h=>{h.picker.update().render()}),delete i._updating}var ne=class{constructor(e,t={}){let r=Array.isArray(t.inputs)?t.inputs:Array.from(e.querySelectorAll("input"));if(r.length<2)return;e.rangepicker=this,this.element=e,this.inputs=r=r.slice(0,2),Object.freeze(r),this.allowOneSidedRange=!!t.allowOneSidedRange;let n=re.bind(null,this),s=yt(t),a=this.datepickers=[];r.forEach(o=>{Nt(this,n,o,s)}),Object.freeze(a),Object.defineProperty(this,"dates",{get(){return a.map(o=>o.dates[0])}}),a[0].dates.length>0?re(this,{target:r[0]}):a[1].dates.length>0&&re(this,{target:r[1]})}setOptions(e){this.allowOneSidedRange=!!e.allowOneSidedRange;let t=yt(e);this.datepickers.forEach(r=>{r.setOptions(t)})}destroy(){this.datepickers.forEach(e=>{e.destroy()}),ae(this),delete this.element.rangepicker}getDates(e=void 0){let t=e?r=>A(r,e,this.datepickers[0].config.locale):r=>new Date(r);return this.dates.map(r=>r===void 0?r:t(r))}setDates(e,t){let{datepickers:[r,n],inputs:[s,a],dates:[o,c]}=this;this._updating=!0,r.setDate(e),n.setDate(t),delete this._updating,n.dates[0]!==c?re(this,{target:a}):r.dates[0]!==o&&re(this,{target:s})}};function Et({format:i="yyyy-mm-dd",todayHighlight:e=!0,autohide:t=!0,...r}){return{init:function(){new ne(this.$refs.datepicker,{todayHighlight:e,format:i,autohide:t,...r})}}}export{Et as default};
